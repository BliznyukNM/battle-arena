[gd_scene load_steps=32 format=4 uid="uid://be4w2ieudw2jk"]

[ext_resource type="Script" path="res://characters/skills/projectiles/projectile.gd" id="1_gtc3e"]
[ext_resource type="Shader" path="res://vfx/trail.gdshader" id="3_jvhix"]
[ext_resource type="Texture2D" uid="uid://drxqa7vvwfbgn" path="res://assets/vfx/trails/StylizedTrail05.png" id="4_i3srd"]
[ext_resource type="Texture2D" uid="uid://d2s2w82pf875w" path="res://assets/vfx/trails/StylizedTrail06.png" id="5_c23x5"]
[ext_resource type="Texture2D" uid="uid://3wt8mg7x1ey" path="res://assets/vfx/trails/StylizedTrail02.png" id="5_qeieh"]
[ext_resource type="Texture2D" uid="uid://da3adlvmfe47h" path="res://assets/vfx/circles/Circle001.png" id="6_257ej"]
[ext_resource type="Texture2D" uid="uid://cju6ewh1vmyjv" path="res://assets/vfx/kenney_particle_pack/magic_05.png" id="7_vsrng"]

[sub_resource type="BoxShape3D" id="BoxShape3D_ml1j8"]
size = Vector3(0.28418, 0.238037, 0.774)

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_qny8l"]
load_path = "res://.godot/imported/Gradient01.png-c560b35a3db99c4ea0c3aead5c8fff07.s3tc.ctex"

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_pdmxh"]
shading_mode = 0
albedo_color = Color(0, 0, 0, 1)
albedo_texture = SubResource("CompressedTexture2D_qny8l")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7tb12"]

[sub_resource type="ArrayMesh" id="ArrayMesh_1xyb1"]
_surfaces = [{
"aabb": AABB(-0.911331, -0.196319, -0.704121, 1.91133, 0.392638, 1.40824),
"format": 34896613377,
"index_count": 132,
"index_data": PackedByteArray("CgADAAEACgALAAMACwADAAMACwAMAAMADAADAAMADAANAAMADQADAAMADQAOAAMADgADAAMADgAPAAMADwADAAMADwAQAAMAAwABAAMAAwADAAMAAwABAAMAAwADAAMAAwABAAMAAQADAAMAEAADAAMAEAARAAMAEQABAAMAEQAKAAEACQAKABEACQAAAAoACAARABAACAAJABEABwAQAA8ABwAIABAABgAPAA4ABgAHAA8ABQAOAA0ABQAGAA4ABAANAAwABAAFAA0AAgAMAAsAAgAEAAwAAAALAAoAAAACAAsACAAHAAkABgAJAAcABgAAAAkAAAAFAAIAAAAGAAUABAACAAUA"),
"lods": [0.33453, PackedByteArray("CgADAAEACgACAAMAAAACAAoAAgADAAMAAgAMAAMAAgAEAAwADAADAAMABAAFAAwADAAFAAMABQADAAMABQADAAMABQADAAMABQAIABAABQAQAAMAAwABAAMAAwABAAMAAwABAAMAAQADAAMAAwADAAMAAwADAAMAEAADAAMACAAJABAAEAAJAAMACQABAAMACQAKAAEACQAAAAoACAAFAAkABQAAAAkAAAAFAAIABAACAAUA")],
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 18,
"vertex_data": PackedByteArray("wUIAAP9/AAD///9//38AALgcBRGB2gAA////f/9/AAAAAP9///8AALgc+e6B2gAAwUL///9/AAC4HPnufSUAAAAA/38AAAAAuBwFEX0lAAAPeoYx/38AAA96gkhSqgAAD3r/f9u7AAAPeny3UqoAAA96eM7/fwAAD3p8t6xVAAAPev9/I0QAAA96gkisVQAA")
}]
blend_shape_mode = 0

[sub_resource type="ArrayMesh" id="ArrayMesh_kfwtp"]
resource_name = "arrow_head_Cylinder_003"
_surfaces = [{
"aabb": AABB(-0.911331, -0.196319, -0.704121, 1.91133, 0.392638, 1.40824),
"attribute_data": PackedByteArray("AAD/fwAA/38AAP9/////f/8/joIAAAAA//8AAP/f/3//3/9//9//f//f/39xa42U/98AAP/fAAD/v/9//7//f/+//39wff+//78AAP+/AAD/n/9//5//f/+f/3//n/9/cWtw6/+fAAD/nwAA/3//f/9//3//f/9//3//f/8/b/3/fwAA/38AAP9f/3//X/9//1//f/9f/3+OFHDr/18AAP9fAAD/P/9//z//f/8//3+PAv+//z8AAP8/AAD/H/9//x//f/8f/3//H/9/jhSNlP8fAAD/HwAAAAD/P////z8AAP8/////P//f/z//3/8//9//P//f/z//v/8//7//P/+//z//v/8//5//P/+f/z//n/8//5//P/9//z//f/8//3//P/9//z//X/8//1//P/9f/z//X/8//z//P/8//z//P/8//z//P/8f/z//H/8//x//P/8f/z//3/9//5//f/+fAAD/fwAA/18AAP8//3//PwAA/x//f/8fAAD/P/8/"),
"format": 34896613399,
"index_count": 132,
"index_data": PackedByteArray("NwAMAAYANwA6AAwAPAASAA0APAA+ABIAPwAaABMAPwBEABoAQgAgABkAQgBGACAARwAnACEARwBKACcATAAuACgATABPAC4AEQAEAAsAMwAmACwAGAAEABEAMwAfACYAHwAEABgABAAfADMATgA1AC0ATgBUADUAUgAFADQAUgA2AAUAMQA4AFMAMQACADgAKwBVAFEAKwAyAFUAJQBQAE0AJQAqAFAAHgBLAEkAHgAkAEsAFgBIAEMAFgAdAEgAEABFAEEAEAAXAEUACgBAAD0ACgAPAEAAAwA7ADkAAwAJADsAKQAjADAAHAAvACIAHAABAC8AAAAUAAcAAAAbABQADgAIABUA"),
"lods": [0.33453, PackedByteArray("NwAMAAYANwBWAAwAAwBWADcACQASAAwAVgA+ABIAVgAPAD4APwAZABMAEABXAD8APwBXAFgAFgAgAFgAFgAuAFoAFgAnAFkAVwBbAF8AVwBfAFwAEQAEAAsAGAAEABEAHwAEABgABAAfADMAMwAfACYAMwAmACwATgA0AC0AKwBdAE4ATgBdAF4AMQAFAF4AXQA2AAUAXQACADYAKQAUAC8AFAAAAC8AAAAUAAcADgAHABQA")],
"material": SubResource("StandardMaterial3D_7tb12"),
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 96,
"vertex_data": PackedByteArray("wUIAAP9/aOLBQgAA/39pYsFCAAD/fxPgwUIAAP9//8T///9//3//v////3//f+zL////f/9/aOG4HAURgdpo4rgcBRGB2jTquBwFEYHalMK4HAURgdr6q////3//f/+/////f/9/n93///9//38MXQAA/3///zTqAAD/f///wqoAAP9///8V3////3//f/+/////f/9/88P///9//38MXbgc+e6B2mjiuBz57oHaNOq4HPnugdo137gc+e6B2nTj////f/9//7////9//38ZRv///3//f5HKwUL///9/aOLBQv///39pYsFC////f9rkwUL///9/CNX///9//3//v////3//f5XU////f/9/Gca4HPnufSVpYrgc+e59JTVquBz57n0lptK4HPnufSU57f///3//f/+/////f/9/6Nv///9//38L3QAA/38AADVqAAD/fwAAtuwAAP9/AADD5////3//f/+/////f/9/C93///9//3/o7bgcBRF9JWliuBwFEX0lNWq4HAURfSWu27gcBRF9JeLo////f/9//7////9//38Wy////3//fyXiD3qGMf9/FdYPeoYx/39Rzw96hjH/f+/YD3qGMf9//80PeoJIUqpRzw96gkhSqmXID3qCSFKq88MPeoJIUqplvw96/3/bu/PDD3r/f9u7kcoPev9/27s7vA96/3/bu53LD3p8t1KqldQPeny3Uqrs1Q96fLdSqpHKD3p8t1KqSs8PenjO/3+V1A96eM7/f+jbD3p4zv9/l9sPenjO/3+A3Q96fLesVejbD3p8t6xVSdgPeny3rFXo7Q96fLesVQ/1D3r/fyNEJeIPev9/I0To7Q96/38jRMrzD3r/fyNEweMPeoJIrFUT1g96gkisVcTUD3qCSKxVJeIPeoJIrFVg5LgcBRGB2nS2uBz57oHagdz///9//3+sXf///3//f3LM////f/9/8M0AAP9/AACPz////3//f8fTuBwFEX0lUd////9//38c1A96/38jRBPc/3/+//9//v/QZBlH8k3KVv///38NQOpZQmvZTP9//v//f///Vkl+WJdeU1b///9/4WcyThIQ7G//f///AF05Vq+bkZT///9/R2hoWezv7G//f/7//3///yaj3af1mb+V////f8H4wXiqpImW/3/+//9//v+lnmeqorqxoP///392qvukwfjBeP9//v//f/7/4L4KnvzIxp7///9/FK6bqezv7G//f/7/a8qBnWtdvDX///9/EhDsb3K0lq//f/7//3/+/zxfqEmPYTsz////f2o9MVsITLpGoFT3T5lZ6VOEW1xLuFoUUplZ6VNfU8pUR2hoWQlweldHaGhZqqSJlshtVFeppHCOdqr7pGOrOaOqpImWvaLAj3aq+6QUrpupNKYlpseuG6gUrpupnbXUo3K0lq80t3auCEy6RnK0lq+7uTus60rtQJ5U+E9PVTVOCEy6Rn9Owz7xTbtSHqKspt/u4G4BpUelzqb8q+rUiZmUuBexSWPQQ+5BW1cjvmeq")
}]
blend_shape_mode = 0
shadow_mesh = SubResource("ArrayMesh_1xyb1")

[sub_resource type="Curve" id="Curve_cvga6"]
_data = [Vector2(0, 0), 0.0270512, 17.6542, 0, 0, Vector2(0.133333, 1), 0.0377788, 0.0377788, 0, 0, Vector2(1, 0), -0.197724, 0.0, 0, 0]
point_count = 3

[sub_resource type="ShaderMaterial" id="ShaderMaterial_nqyxe"]
render_priority = 0
shader = ExtResource("3_jvhix")
shader_parameter/albedo = Color(0.501961, 1, 0.501961, 1)
shader_parameter/tiling = Vector2(1, 1)
shader_parameter/speed = Vector2(-1, 2.08165e-12)
shader_parameter/main_texture = ExtResource("4_i3srd")

[sub_resource type="RibbonTrailMesh" id="RibbonTrailMesh_a4btl"]
material = SubResource("ShaderMaterial_nqyxe")
shape = 0
sections = 16
section_length = 0.1
curve = SubResource("Curve_cvga6")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_cnfa1"]
render_priority = 0
shader = ExtResource("3_jvhix")
shader_parameter/albedo = Color(0.065, 0.13, 0.065, 1)
shader_parameter/tiling = Vector2(1, 1)
shader_parameter/speed = Vector2(-1, 2.08165e-12)
shader_parameter/main_texture = ExtResource("5_c23x5")

[sub_resource type="RibbonTrailMesh" id="RibbonTrailMesh_pe8rn"]
material = SubResource("ShaderMaterial_cnfa1")
shape = 0
sections = 27
section_length = 0.1
curve = SubResource("Curve_cvga6")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_co6tl"]
render_priority = 0
shader = ExtResource("3_jvhix")
shader_parameter/albedo = Color(0.065, 0.13, 0.065, 1)
shader_parameter/tiling = Vector2(1, 1)
shader_parameter/speed = Vector2(-1, 2.08165e-12)
shader_parameter/main_texture = ExtResource("5_qeieh")

[sub_resource type="RibbonTrailMesh" id="RibbonTrailMesh_hkwf0"]
material = SubResource("ShaderMaterial_co6tl")
shape = 0
sections = 27
section_length = 0.1
curve = SubResource("Curve_cvga6")

[sub_resource type="GDScript" id="GDScript_2333c"]
resource_name = "hit_vfx"
script/source = "extends Node3D


func play_hit() -> void:
    $Muzzle.emitting = true


func play_finish() -> void:
    $Charge.emitting = true
"

[sub_resource type="Curve" id="Curve_8e1n2"]
min_value = 2.13163e-14
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 2.13163e-14), -2.79944, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_qmeuh"]
curve = SubResource("Curve_8e1n2")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_m7fqx"]
emission_shape = 1
emission_sphere_radius = 1.0
gravity = Vector3(2.08165e-12, 2.08165e-12, 2.08165e-12)
radial_accel_min = 30.0
radial_accel_max = 30.0
radial_accel_curve = SubResource("CurveTexture_qmeuh")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_lqeyx"]
transparency = 1
shading_mode = 0
albedo_color = Color(0.8, 1.6, 0.8, 1)
albedo_texture = ExtResource("6_257ej")

[sub_resource type="QuadMesh" id="QuadMesh_cs0ee"]
material = SubResource("StandardMaterial3D_lqeyx")
size = Vector2(0.1, 0.2)

[sub_resource type="Curve" id="Curve_rax4i"]
max_value = 3.0
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.496094, 3), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_yq2kq"]
curve = SubResource("Curve_rax4i")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_ypp7y"]
gravity = Vector3(2.08165e-12, 2.08165e-12, 2.08165e-12)
scale_curve = SubResource("CurveTexture_yq2kq")
color = Color(0.8, 1.6, 0.8, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fj704"]
transparency = 1
blend_mode = 1
no_depth_test = true
shading_mode = 0
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("7_vsrng")

[sub_resource type="QuadMesh" id="QuadMesh_1mqq5"]
material = SubResource("StandardMaterial3D_fj704")

[node name="Arrow" type="Area3D"]
monitorable = false
script = ExtResource("1_gtc3e")
radius = 1.0
speed = 20.0
distance = 12.0
damage = 18
energy_gain = 5

[node name="Collision" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.191437)
shape = SubResource("BoxShape3D_ml1j8")

[node name="View" type="Node3D" parent="."]

[node name="ArrowHead01" type="MeshInstance3D" parent="View"]
transform = Transform3D(-1.31134e-08, -1.04636e-16, -0.3, 1.04636e-16, 0.3, -1.04636e-16, 0.3, -1.04636e-16, -1.31134e-08, 0, 0, 0)
material_override = SubResource("StandardMaterial3D_pdmxh")
mesh = SubResource("ArrayMesh_kfwtp")
skeleton = NodePath("")

[node name="Trail" type="MeshInstance3D" parent="View"]
transform = Transform3D(0.00034912, -0.00280992, -0.999996, -1, -9.81223e-07, -0.000349119, 0, 0.999996, -0.00280992, 0, 0, -0.51635)
mesh = SubResource("RibbonTrailMesh_a4btl")
skeleton = NodePath("../..")

[node name="Trail2" type="MeshInstance3D" parent="View"]
transform = Transform3D(0.00034912, -0.00280992, -0.999996, -1, -9.81223e-07, -0.000349119, 0, 0.999996, -0.00280992, -0.0421472, 0, -1.31253)
mesh = SubResource("RibbonTrailMesh_pe8rn")
skeleton = NodePath("../..")

[node name="Trail3" type="MeshInstance3D" parent="View"]
transform = Transform3D(0.00034912, -0.00280992, -0.999996, -1, -9.81223e-07, -0.000349119, 0, 0.999996, -0.00280992, 0.0502927, 0.00231194, -1.31253)
mesh = SubResource("RibbonTrailMesh_hkwf0")
skeleton = NodePath("../..")

[node name="HitVFX" type="Node3D" parent="."]
script = SubResource("GDScript_2333c")

[node name="Charge" type="GPUParticles3D" parent="HitVFX"]
emitting = false
amount = 12
lifetime = 0.2
one_shot = true
visibility_aabb = AABB(-1.32101, -1.1481, -1.12079, 2.64202, 2.29621, 2.24159)
local_coords = true
transform_align = 3
process_material = SubResource("ParticleProcessMaterial_m7fqx")
draw_pass_1 = SubResource("QuadMesh_cs0ee")

[node name="Muzzle" type="GPUParticles3D" parent="HitVFX"]
emitting = false
amount = 1
lifetime = 0.2
one_shot = true
transform_align = 3
process_material = SubResource("ParticleProcessMaterial_ypp7y")
draw_pass_1 = SubResource("QuadMesh_1mqq5")

[connection signal="area_entered" from="." to="." method="_on_area_entered"]
